<!DOCTYPE html>
<html lang="ar" dir="rtl">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>ومضة معرفة</title>
        <link rel="stylesheet" href="../styles.css" />
        <link rel="icon" href="favicon.ico" type="image/x-icon" />
        <link href="https://fonts.googleapis.com/css2?family=Cairo&display=swap" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    </head>
    <body>
        <div id="top-bar" class="top-bar"></div>
        <div class="container" id="main-container">
            <div id="rightbar" class="section1"></div>
            <div class="section2 article-page">
                <h2 class="article-title">
                    سياسة الخصوصية
                </h2>
                <hr class="article-divider">
                <div class="article-content">
                    <p>نحن في هذا الموقع نحترم خصوصية زوارنا ونسعى جاهدين لحماية بياناتهم الشخصية. تهدف هذه الصفحة إلى توضيح كيفية جمعنا للمعلومات، وكيفية استخدامها، وحمايتها.</p>

                    <h2 style="font-size: 20px; margin-top: 20px;">1. جمع المعلومات</h2>
                    <p>قد نقوم بجمع بعض المعلومات عنك عند استخدامك لموقعنا، مثل:</p>
                    <ul style="padding-right: 20px; margin-top: 10px;">
                        <li>المعلومات التي تقوم بإدخالها في النماذج (مثل الاسم أو البريد الإلكتروني).</li>
                        <li>البيانات التقنية مثل عنوان الـ IP، نوع المتصفح، وتاريخ ووقت الزيارة.</li>
                    </ul>

                    <h2 style="font-size: 20px; margin-top: 20px;">2. استخدام المعلومات</h2>
                    <p>نستخدم المعلومات التي نجمعها للأغراض التالية:</p>
                    <ul style="padding-right: 20px; margin-top: 10px;">
                        <li>تحسين خدماتنا وتجربة التصفح.</li>
                        <li>الرد على استفساراتك ومراسلاتك.</li>
                        <li>إرسال تحديثات أو محتوى جديد إذا اشتركت في النشرة البريدية.</li>
                    </ul>

                    <h2 style="font-size: 20px; margin-top: 20px;">3. حماية البيانات</h2>
                    <p>نلتزم باستخدام إجراءات أمان مناسبة لحماية بياناتك من الوصول غير المصرح به أو التعديل أو الإفصاح أو الإتلاف.</p>

                    <h2 style="font-size: 20px; margin-top: 20px;">4. الروابط الخارجية</h2>
                    <p>قد يحتوي موقعنا على روابط لمواقع خارجية. نحن غير مسؤولين عن ممارسات الخصوصية أو محتوى تلك المواقع.</p>

                    <h2 style="font-size: 20px; margin-top: 20px;">5. التغييرات على سياسة الخصوصية</h2>
                    <p>قد نقوم بتحديث هذه السياسة من وقت لآخر، وسيتم نشر أي تعديلات على هذه الصفحة.</p>

                    <h2 style="font-size: 20px; margin-top: 20px;">6. التواصل معنا</h2>
                    <p>إذا كانت لديك أي أسئلة بخصوص سياسة الخصوصية، يمكنك التواصل معنا عبر هذا الرابط: <a href="http://127.0.0.1:5500/contact.html" style="color: #0066cc; text-decoration: none;">اتصل بنا</a></p>
                </div>
            </div>
            <div id="leftbar" class="section3"></div>
        </div>
        <footer id="footer" class="footer"></footer>

        <script src="scripts.js"></script>
        <script>
            let articlesData = [];

            // Handle category click - redirect to results.html?kw=category
            function handleCategoryClick(category, event) {
                event.stopPropagation();
                event.preventDefault();
                console.log('Category clicked:', category);
                
                // Encode the category to handle Arabic text and special characters
                const encodedCategory = encodeURIComponent(category);
                // Redirect to results page with kw parameter
                window.location.href = `http://127.0.0.1:5500/results.html?kw=${encodedCategory}`;
            }

            // Add click handlers to existing static categories
            function addCategoryClickHandlers() {
                const categoryLinks = document.querySelectorAll('.categories ul li a');
                
                categoryLinks.forEach(link => {
                    link.addEventListener('click', function(event) {
                        event.preventDefault();
                        // Get category name from link text (remove count)
                        const categoryText = this.textContent.trim();
                        const category = categoryText.replace(/\s+\d+$/, ''); // Remove count at the end
                        handleCategoryClick(category, event);
                    });
                });
            }

            // Update categories box dynamically
            function updateCategoriesBox(articles) {
                const categoryMap = {};

                articles.forEach(article => {
                    if (article.categories) {
                        article.categories.forEach(cat => {
                            categoryMap[cat] = (categoryMap[cat] || 0) + 1;
                        });
                    }
                });

                const categoriesBox = document.querySelector('.categories ul');
                if (categoriesBox) {
                    categoriesBox.innerHTML = Object.entries(categoryMap)
                        .map(([cat, count]) => `<li><a href="#" onclick="handleCategoryClick('${cat}', event)"><span>${cat}</span> <span class="count">${count}</span></a></li>`)
                        .join('');
                }
            }

            // Fetch and load articles for categories
            async function loadArticlesForCategories() {
                try {
                    const response = await fetch('../posts.json');
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    articlesData = await response.json();
                    updateCategoriesBox(articlesData);

                } catch (error) {
                    console.error('Error loading articles for categories:', error);
                    // If JSON fails, still add handlers to existing static categories
                    addCategoryClickHandlers();
                }
            }

            document.addEventListener('DOMContentLoaded', function() {
                loadArticlesForCategories();
                // Also add handlers to existing static categories immediately
                addCategoryClickHandlers();
            });
        </script>
        <script type="text/javascript">
            function googleTranslateElementInit() {
                new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
            }
        </script>
        <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    </body>
</html>